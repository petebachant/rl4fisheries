stages:
  _check-env-main:
    cmd: calkit check environment --name main
    deps:
      - pyproject.toml
    outs:
      - uv.lock:
          cache: false
          persist: true
    always_changed: true
    desc: Automatically generated by Calkit. Changes made here will be
      overwritten.
  _check-env-for-results:
    cmd: calkit check environment --name for-results
    deps:
      - notebooks/for_results/requirements.txt
    outs:
      - .calkit/env-locks/for-results.txt:
          cache: false
          persist: true
    always_changed: true
    desc: Automatically generated by Calkit. Changes made here will be
      overwritten.
  _clean-nb-tests:
    cmd: calkit nb clean 
      "notebooks/for_generating_results/0_tests.ipynb"
    deps:
      - notebooks/for_generating_results/0_tests.ipynb
    outs:
      - .calkit/notebooks/cleaned/notebooks/for_generating_results/0_tests.ipynb:
          cache: false
    desc: Automatically generated from the 'tests' stage in 
      calkit.yaml. Changes made here will be overwritten.
  tests:
    cmd: calkit nb execute --environment main --no-check --to html 
      "notebooks/for_generating_results/0_tests.ipynb"
    deps:
      - .calkit/notebooks/cleaned/notebooks/for_generating_results/0_tests.ipynb
      - uv.lock
    outs:
      - .calkit/notebooks/executed/notebooks/for_generating_results/0_tests.ipynb:
          cache: false
      - .calkit/notebooks/html/notebooks/for_generating_results/0_tests.html:
          cache: false
    desc: Automatically generated from the 'tests' stage in 
      calkit.yaml. Changes made here will be overwritten.
  _clean-nb-fp-skopt:
    cmd: calkit nb clean 
      "notebooks/for_generating_results/1_fp_skopt.ipynb"
    deps:
      - notebooks/for_generating_results/1_fp_skopt.ipynb
    outs:
      - .calkit/notebooks/cleaned/notebooks/for_generating_results/1_fp_skopt.ipynb:
          cache: false
    desc: Automatically generated from the 'fp-skopt' stage in 
      calkit.yaml. Changes made here will be overwritten.
  fp-skopt:
    cmd: calkit nb execute --environment main --no-check --to html 
      "notebooks/for_generating_results/1_fp_skopt.ipynb"
    deps:
      - .calkit/notebooks/cleaned/notebooks/for_generating_results/1_fp_skopt.ipynb
      - uv.lock
    outs:
      - notebooks/for_generating_results/csv/opt-params.csv:
          cache: false
          persist: false
      - .calkit/notebooks/executed/notebooks/for_generating_results/1_fp_skopt.ipynb:
          cache: false
      - .calkit/notebooks/html/notebooks/for_generating_results/1_fp_skopt.html:
          cache: false
    desc: Automatically generated from the 'fp-skopt' stage in 
      calkit.yaml. Changes made here will be overwritten.
  _clean-nb-reward-distr:
    cmd: calkit nb clean 
      "notebooks/for_generating_results/2_reward_distr.ipynb"
    deps:
      - notebooks/for_generating_results/2_reward_distr.ipynb
    outs:
      - .calkit/notebooks/cleaned/notebooks/for_generating_results/2_reward_distr.ipynb:
          cache: false
    desc: Automatically generated from the 'reward-distr' stage in 
      calkit.yaml. Changes made here will be overwritten.
  reward-distr:
    cmd: calkit nb execute --environment main --no-check --to html 
      "notebooks/for_generating_results/2_reward_distr.ipynb"
    deps:
      - .calkit/notebooks/cleaned/notebooks/for_generating_results/2_reward_distr.ipynb
      - uv.lock
    outs:
      - notebooks/for_generating_results/csv/UM1_rew.csv
      - notebooks/for_generating_results/csv/UM2_rew.csv
      - notebooks/for_generating_results/csv/UM3_rew.csv
      - .calkit/notebooks/executed/notebooks/for_generating_results/2_reward_distr.ipynb:
          cache: false
      - .calkit/notebooks/html/notebooks/for_generating_results/2_reward_distr.html:
          cache: false
    desc: Automatically generated from the 'reward-distr' stage in 
      calkit.yaml. Changes made here will be overwritten.
  _clean-nb-policy-plots:
    cmd: calkit nb clean 
      "notebooks/for_generating_results/3_policy_plots.ipynb"
    deps:
      - notebooks/for_generating_results/3_policy_plots.ipynb
    outs:
      - .calkit/notebooks/cleaned/notebooks/for_generating_results/3_policy_plots.ipynb:
          cache: false
    desc: Automatically generated from the 'policy-plots' stage in 
      calkit.yaml. Changes made here will be overwritten.
  policy-plots:
    cmd: calkit nb execute --environment main --no-check --to html 
      "notebooks/for_generating_results/3_policy_plots.ipynb"
    deps:
      - .calkit/notebooks/cleaned/notebooks/for_generating_results/3_policy_plots.ipynb
      - uv.lock
    outs:
      - notebooks/for_generating_results/csv/UM1_policies.csv
      - notebooks/for_generating_results/csv/UM2_policies.csv
      - notebooks/for_generating_results/csv/UM3_policies.csv
      - .calkit/notebooks/executed/notebooks/for_generating_results/3_policy_plots.ipynb:
          cache: false
      - .calkit/notebooks/html/notebooks/for_generating_results/3_policy_plots.html:
          cache: false
    desc: Automatically generated from the 'policy-plots' stage in 
      calkit.yaml. Changes made here will be overwritten.
  _clean-nb-episode-plots:
    cmd: calkit nb clean 
      "notebooks/for_generating_results/4_episode_plots.ipynb"
    deps:
      - notebooks/for_generating_results/4_episode_plots.ipynb
    outs:
      - .calkit/notebooks/cleaned/notebooks/for_generating_results/4_episode_plots.ipynb:
          cache: false
    desc: Automatically generated from the 'episode-plots' stage in 
      calkit.yaml. Changes made here will be overwritten.
  episode-plots:
    cmd: calkit nb execute --environment main --no-check --to html 
      "notebooks/for_generating_results/4_episode_plots.ipynb"
    deps:
      - .calkit/notebooks/cleaned/notebooks/for_generating_results/4_episode_plots.ipynb
      - uv.lock
    outs:
      - notebooks/for_generating_results/csv/eps-v2
      - .calkit/notebooks/executed/notebooks/for_generating_results/4_episode_plots.ipynb:
          cache: false
      - .calkit/notebooks/html/notebooks/for_generating_results/4_episode_plots.html:
          cache: false
    desc: Automatically generated from the 'episode-plots' stage in 
      calkit.yaml. Changes made here will be overwritten.
  _clean-nb-stochasticity:
    cmd: calkit nb clean 
      "notebooks/for_generating_results/5_stochasticity.ipynb"
    deps:
      - notebooks/for_generating_results/5_stochasticity.ipynb
    outs:
      - .calkit/notebooks/cleaned/notebooks/for_generating_results/5_stochasticity.ipynb:
          cache: false
    desc: Automatically generated from the 'stochasticity' stage in 
      calkit.yaml. Changes made here will be overwritten.
  stochasticity:
    cmd: calkit nb execute --environment main --no-check --to html 
      "notebooks/for_generating_results/5_stochasticity.ipynb"
    deps:
      - .calkit/notebooks/cleaned/notebooks/for_generating_results/5_stochasticity.ipynb
      - uv.lock
    outs:
      - .calkit/notebooks/executed/notebooks/for_generating_results/5_stochasticity.ipynb:
          cache: false
      - .calkit/notebooks/html/notebooks/for_generating_results/5_stochasticity.html:
          cache: false
    desc: Automatically generated from the 'stochasticity' stage in 
      calkit.yaml. Changes made here will be overwritten.
  _clean-nb-aftermath:
    cmd: calkit nb clean 
      "notebooks/for_generating_results/6_aftermath.ipynb"
    deps:
      - notebooks/for_generating_results/6_aftermath.ipynb
    outs:
      - .calkit/notebooks/cleaned/notebooks/for_generating_results/6_aftermath.ipynb:
          cache: false
    desc: Automatically generated from the 'aftermath' stage in 
      calkit.yaml. Changes made here will be overwritten.
  aftermath:
    cmd: calkit nb execute --environment main --no-check --to html 
      "notebooks/for_generating_results/6_aftermath.ipynb"
    deps:
      - .calkit/notebooks/cleaned/notebooks/for_generating_results/6_aftermath.ipynb
      - uv.lock
    outs:
      - peer-review/myst/figures/aftermath-full.jpeg
      - .calkit/notebooks/executed/notebooks/for_generating_results/6_aftermath.ipynb:
          cache: false
      - .calkit/notebooks/html/notebooks/for_generating_results/6_aftermath.html:
          cache: false
    desc: Automatically generated from the 'aftermath' stage in 
      calkit.yaml. Changes made here will be overwritten.
  _clean-nb-download-data:
    cmd: calkit nb clean "notebooks/for_results/2-download-data.ipynb"
    deps:
      - notebooks/for_results/2-download-data.ipynb
    outs:
      - .calkit/notebooks/cleaned/notebooks/for_results/2-download-data.ipynb:
          cache: false
    desc: Automatically generated from the 'download-data' stage in 
      calkit.yaml. Changes made here will be overwritten.
  download-data:
    cmd: calkit nb execute --environment for-results --no-check --to 
      html "notebooks/for_results/2-download-data.ipynb"
    deps:
      - .calkit/notebooks/cleaned/notebooks/for_results/2-download-data.ipynb
      - .calkit/env-locks/for-results.txt
    outs:
      - notebooks/for_results/data/rl4fisheries-reproducing:
          cache: false
          persist: false
      - .calkit/notebooks/executed/notebooks/for_results/2-download-data.ipynb:
          cache: false
      - .calkit/notebooks/html/notebooks/for_results/2-download-data.html:
          cache: false
    desc: Automatically generated from the 'download-data' stage in 
      calkit.yaml. Changes made here will be overwritten.
  _clean-nb-rewards:
    cmd: calkit nb clean "notebooks/for_results/3-rewards.ipynb"
    deps:
      - notebooks/for_results/3-rewards.ipynb
    outs:
      - .calkit/notebooks/cleaned/notebooks/for_results/3-rewards.ipynb:
          cache: false
    desc: Automatically generated from the 'rewards' stage in 
      calkit.yaml. Changes made here will be overwritten.
  rewards:
    cmd: calkit nb execute --environment for-results --no-check --to 
      html "notebooks/for_results/3-rewards.ipynb"
    deps:
      - .calkit/notebooks/cleaned/notebooks/for_results/3-rewards.ipynb
      - .calkit/env-locks/for-results.txt
    outs:
      - notebooks/for_results/figures/rewards.jpeg
      - notebooks/for_results/csv/rew-table.csv:
          cache: false
          persist: false
      - .calkit/notebooks/executed/notebooks/for_results/3-rewards.ipynb:
          cache: false
      - .calkit/notebooks/html/notebooks/for_results/3-rewards.html:
          cache: false
    desc: Automatically generated from the 'rewards' stage in 
      calkit.yaml. Changes made here will be overwritten.
  _clean-nb-policies:
    cmd: calkit nb clean "notebooks/for_results/4-policies.ipynb"
    deps:
      - notebooks/for_results/4-policies.ipynb
    outs:
      - .calkit/notebooks/cleaned/notebooks/for_results/4-policies.ipynb:
          cache: false
    desc: Automatically generated from the 'policies' stage in 
      calkit.yaml. Changes made here will be overwritten.
  policies:
    cmd: calkit nb execute --environment for-results --no-check --to 
      html "notebooks/for_results/4-policies.ipynb"
    deps:
      - .calkit/notebooks/cleaned/notebooks/for_results/4-policies.ipynb
      - .calkit/env-locks/for-results.txt
    outs:
      - notebooks/for_results/figures/policies.jpeg
      - .calkit/notebooks/executed/notebooks/for_results/4-policies.ipynb:
          cache: false
      - .calkit/notebooks/html/notebooks/for_results/4-policies.html:
          cache: false
    desc: Automatically generated from the 'policies' stage in 
      calkit.yaml. Changes made here will be overwritten.
  _clean-nb-episodes:
    cmd: calkit nb clean "notebooks/for_results/5-episodes.ipynb"
    deps:
      - notebooks/for_results/5-episodes.ipynb
    outs:
      - .calkit/notebooks/cleaned/notebooks/for_results/5-episodes.ipynb:
          cache: false
    desc: Automatically generated from the 'episodes' stage in 
      calkit.yaml. Changes made here will be overwritten.
  episodes:
    cmd: calkit nb execute --environment for-results --no-check --to 
      html "notebooks/for_results/5-episodes.ipynb"
    deps:
      - .calkit/notebooks/cleaned/notebooks/for_results/5-episodes.ipynb
      - .calkit/env-locks/for-results.txt
    outs:
      - .calkit/notebooks/executed/notebooks/for_results/5-episodes.ipynb:
          cache: false
      - .calkit/notebooks/html/notebooks/for_results/5-episodes.html:
          cache: false
    desc: Automatically generated from the 'episodes' stage in 
      calkit.yaml. Changes made here will be overwritten.
